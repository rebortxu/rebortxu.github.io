<!-- build time:Fri Aug 02 2019 00:07:44 GMT+0800 (GMT+08:00) --><!DOCTYPE html><script src="/js/src/pjax/jquery_min_js.js"></script><script src="/js/src/pjax/jquery_pjax_min_js.js"></script><script src="/js/src/pjax/pjaxMain.js"></script><html class="theme-next muse use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-flash.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4"><link rel="mask-icon" href="/images/favicon.ico?v=5.1.4" color="#222"><link rel="manifest" href="/images/favicon.ico"><meta name="msapplication-config" content="/images/favicon.ico"><meta name="keywords" content="Hexo, NexT"><link rel="alternate" href="/atom.xml" title="Rebortxu's Blog" type="application/atom+xml"><meta name="description" content="Proxy design patternProvide a surrogate or placeholder for another object to control access to it.-GOF Design PatternsProxy design patternprovides an object of a class with the functionality of anothe"><meta property="og:type" content="article"><meta property="og:title" content="代理模式"><meta property="og:url" content="https://rebortxu.github.io/代理模式.html"><meta property="og:site_name" content="Rebortxu&#39;s Blog"><meta property="og:description" content="Proxy design patternProvide a surrogate or placeholder for another object to control access to it.-GOF Design PatternsProxy design patternprovides an object of a class with the functionality of anothe"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2019-08-01T03:44:32.233Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="代理模式"><meta name="twitter:description" content="Proxy design patternProvide a surrogate or placeholder for another object to control access to it.-GOF Design PatternsProxy design patternprovides an object of a class with the functionality of anothe"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"hide",offset:12,b2t:!1,scrollpercent:!1,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"P88H67GUII",apiKey:"5489ac7ce78f59f4a8cb5445035f54d8",indexName:"dataiyangu",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://rebortxu.github.io/代理模式.html"><title>代理模式 | Rebortxu's Blog</title></head><body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans"><link rel="stylesheet" href="/dist/APlayer.min.css"><div class="hover_sidebar"></div><header id="header_left" class="header_left" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header_left_inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu_left" class="menu_left"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i><br>热度</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li></ul></nav></div><div class="header_sidebar">黑匣子</div></header><div class="eye"><div class="eye1"><ul><li style="background-color:#C7EDCC">豆沙绿</li><li style="background-color:#FAF9DE">杏仁黄</li><li style="background-color:#FFF">银河白</li><li style="background-color:#323232">极光黑</li><li style="background-color:#FFF2E2">秋叶褐</li><li style="background-color:#FDE6E0">胭脂红</li><li style="background-color:#E3EDCD">青草绿</li><li style="background-color:#DCE2F1">海天蓝</li><li style="background-color:#E9EBFE">葛巾紫</li><li style="background-color:#EAEAEF">极光灰</li><li style="background-color:#cce8cf">qq管家</li></ul></div><div class="eye2">满天星</div></div><div id="aplayer"></div><script type="text/javascript" src="/dist/APlayer.min.js"></script><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><a href="https://github.com/rebortxu?tab=repositories"><img style="position:absolute;top:0;left:0;border:0" alt="Fork me on GitHub" data-original="/images/github_fork.png"></a><div class="bg_content"><canvas id="canvas"></canvas></div><header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Rebortxu's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">the best of me</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i><br>热度</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li></ul></nav></div></header><div id="pjax-container"><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article data-scroll-reveal="enter bottom move 60px over 0.6s after 0.05s" class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://rebortxu.github.io/代理模式.html"><span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="rebortxu"><meta itemprop="description" content=""><meta itemprop="image" content="/images/marlowe.jpg"></span><span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Rebortxu's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">代理模式</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-26T06:38:40+08:00">2019-07-26 </time></span><span id="/代理模式.html" class="leancloud_visitors" data-flag-title="代理模式"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数&#58;</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-file-o"></i>Read the number <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>times</span><div class="post-wordcount"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">420字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">2分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="Proxy-design-pattern"><a href="#Proxy-design-pattern" class="headerlink" title="Proxy design pattern"></a>Proxy design pattern</h1><p><code>Provide a surrogate or placeholder for another object to control access to it.-GOF Design Patterns</code></p><h2 id="Proxy-design-pattern-1"><a href="#Proxy-design-pattern-1" class="headerlink" title="Proxy design pattern"></a>Proxy design pattern</h2><p>provides an object of a class with the functionality of another class with having it. This pattern comes under the structural design pattern of GOF Design Patterns. The intent of this design pattern is to provide an alternate class for another class , along with its functionality, to the outside world.</p><h2 id="Purpose-of-the-Proxy-pattern"><a href="#Purpose-of-the-Proxy-pattern" class="headerlink" title="Purpose of the Proxy pattern"></a>Purpose of the Proxy pattern</h2><p>Let’s look at the following points:</p><ul><li>This pattern hides the actual object from the outside world.</li><li>This pattern can improve the performance because it is creating an object on demand.</li></ul><h2 id="UML-structure-for-the-Proxy-design-pattern"><a href="#UML-structure-for-the-Proxy-design-pattern" class="headerlink" title="UML structure for the Proxy design pattern"></a>UML structure for the Proxy design pattern</h2><p>Let’s see the following UML diagram for this pattern:</p><p><img alt="upload successful" data-original="/images/my_blog_0.png"></p><p>UML diagram for Proxy design pattern</p><p>Now let’s look at the different components of this UML diagram:</p><ul><li>Subject: Actual interface to be implemented by Proxy and RealSubject.</li><li>RealSubject: Real implementation of Subject. It is a real object that represented by the proxy.</li><li>Proxy: It is a proxy object and it is also the implementation of the real object Subject. It maintains the references to the real object.</li></ul><h2 id="Implementing-the-Proxy-design-pattern"><a href="#Implementing-the-Proxy-design-pattern" class="headerlink" title="Implementing the Proxy design pattern"></a>Implementing the Proxy design pattern</h2><p>Let’s look into following code to demonstrate the Proxy pattern.</p><p>Create a Subject.<br>Following is the Account.java file:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Account</span> </span>&#123;      </span><br><span class="line">    <span class="function"><span class="keyword">void</span>  <span class="title">accountType</span><span class="params">()</span></span>;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Create a RealSubject class that implements Subject, let’s see the following class as RealSubject class for the Proxy design pattern.</p><p>Following is the SavingAccount.java file:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SavingAccount</span> <span class="keyword">implements</span> <span class="title">Account</span></span></span><br><span class="line"><span class="class"></span>&#123;    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accountType</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">     System.out.println(<span class="string">"SAVING ACCOUNT"</span>); </span><br><span class="line"></span><br><span class="line">  &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Create a Proxy class which implements Subject and having the Real Subject</p><p>Following is the ProxySavingAccount.java file:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.packt.patterninspring.chapter2.proxy.pattern;    </span><br><span class="line"><span class="keyword">import</span> com.packt.patterninspring.chapter2.model.Account;     </span><br><span class="line"><span class="keyword">import</span> com.packt.patterninspring.chapter2.model.SavingAccount;    </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxySavingAccount</span> <span class="keyword">implements</span> <span class="title">Account</span></span>&#123;      </span><br><span class="line"><span class="keyword">private</span> Account savingAccount;      </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accountType</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;         </span><br><span class="line">   <span class="keyword">if</span>(savingAccount == <span class="keyword">null</span>)</span><br><span class="line">  &#123;                </span><br><span class="line">    savingAccount = <span class="keyword">new</span> SavingAccount();         </span><br><span class="line">    </span><br><span class="line">    &#125;                </span><br><span class="line">    savingAccount.accountType();      </span><br><span class="line">  &#125;     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>Proxy pattern in the Spring Framework</p><p>Spring Frameworks ues the Proxy design pattern in the Spring AOP module transparently. As I have discussed in Chapter 1, Getting Started with Spring Framework 5.0 and Design Patterns. In Spring AOP, you create proxies of the object to apply cross cutting concern across the point cut in the Spring application. In the Spring, other modules also implement the Proxy pattern, such as RMI, Spring’s HTTP Invoker, Hessian, and Burlap.Let’s see the next section about Behavioral design pattern with its underlying patterns and example.le.e.</p></div><div><div><div style="text-align:center;color:#555;font-size:14px">-------------The End-------------</div></div></div><div><div class="my_post_copyright"><p><span>本文标题:</span><a href="/代理模式.html">代理模式</a></p><p><span>文章作者:</span><a href="/" title="访问 rebortxu 的个人博客">rebortxu</a></p><p><span>发布时间:</span>2019年07月26日 - 06:07</p><p><span>最后更新:</span>2019年08月01日 - 11:08</p><p><span>原始链接:</span><a href="/代理模式.html" title="代理模式">https://rebortxu.github.io/代理模式.html</a></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>客官客官，不可以，你要对我负责～～～</div><button id="rewardButton" disable="enable"><script>window.onload=function(){var n=document.getElementById("QR"),e=document.getElementById("rewardButton");e.onclick=function(){"none"===n.style.display?n.style.display="block":n.style.display="none"}}</script><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" alt="rebortxu 微信支付" data-original="/images/wechatpay.jpg"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" alt="rebortxu 支付宝" data-original="/images/alipay.jpg"><p>支付宝</p></div></div></div></div><footer class="post-footer"></footer></div></article><div class="post-spread"></div></div></div><div id="gitalk-containe"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="rebortxu" data-original="/images/marlowe.jpg"><p class="site-author-name" itemprop="name">rebortxu</p><p class="site-description motion-element" itemprop="description">the best of me</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">1</span> <span class="site-state-item-name">日志</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Proxy-design-pattern"><span class="nav-number">1.</span> <span class="nav-text">Proxy design pattern</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Proxy-design-pattern-1"><span class="nav-number">1.1.</span> <span class="nav-text">Proxy design pattern</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Purpose-of-the-Proxy-pattern"><span class="nav-number">1.2.</span> <span class="nav-text">Purpose of the Proxy pattern</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UML-structure-for-the-Proxy-design-pattern"><span class="nav-number">1.3.</span> <span class="nav-text">UML structure for the Proxy design pattern</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Implementing-the-Proxy-design-pattern"><span class="nav-number">1.4.</span> <span class="nav-text">Implementing the Proxy design pattern</span></a></li></ol></li></ol></div></div></section></div></aside></div><script>function password(){}var div=$(".post-body"),toc=$(".post-toc-wrap");password()</script></main></div><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2019</span> <span class="with-love" id="heart"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">rebortxu</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i>总访客 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人 </span><span class="site-pv"><i class="fa fa-eye"></i>访问量 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("6og9b7lpddMqazBCDe8z4HqL-gzGzoHsz","faKN7dalSdXLmYYJTRq98B1f")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){var t=".leancloud-visitors-count";if(0===e.length)return void o.find(t).text(0);for(var i=0;i<e.length;i++){var r=e[i],s=r.get("url"),l=r.get("time"),c=document.getElementById(s);$(c).find(t).text(l)}for(var i=0;i<n.length;i++){var s=n[i],c=document.getElementById(s),u=$(c).find(t);""==u.text()&&u.text(0)}}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var r=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),r.setACL(s),r.set("title",o),r.set("url",n),r.set("time",1),r.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></body></html><script src="/js/src/pjax/lazyload_min.js"></script><script src="/js/src/pjax/comments/comments.gitalk.js"></script><script src="/js/src/pjax/require.js" defer async data-main="/js/src/pjax/main.js"></script><!-- rebuild by neat -->